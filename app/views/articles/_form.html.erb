<input type="file" id="fileuploader" accept='image/jpg,image/jpeg,image/png,image/gif'>
<%= form_for(@article, html: {class: "article_form", id: "editor"}) do |f| %>
  <input type="hidden" value="<%= current_user.id %>" name="article[user_id]">
  <div class="title">
    <input type="text" v-model="title" name="article[title]" value="<%=@article.title%>" placeholder="タイトル">
  </div>
  <div class="content">
    <textarea v-model="content" name="article[content]" placeholder="記事を入力"><%= @article.content %></textarea>
  </div>
  <div class="preview">
    <div v-if="content">
      <div v-html="mark(content)" ></div>
    </div>
    <div v-else style="color: gray;">プレビュー</div>
  </div>
  <button type="button" :disabled="content.length==0 || title.length==0" class="btn btn-orange" data-toggle="modal" data-target="#price-modal">価格設定</button>

  <!-- モーダル部分 -->
  <%= render 'price_modal', f: f %>

<% end %>



 <script type="text/javascript">
  new Vue({
     el: "#editor",
     data: {
       content: "<%= j @article.content %>",
       title: "<%= j @article.title%>",
     },
     methods: {
       mark: function(text){
         return marked(text, {sanitize: true})
       },
     },
   });
 </script>
